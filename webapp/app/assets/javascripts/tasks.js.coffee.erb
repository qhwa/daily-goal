angular.module( 'task', [
  'ngResource',
  'tasksServices',
  'dailyReviewsServices',
  'rolesServices',
  'ui',
  'prevent-default'
  ])
  .config ($routeProvider) ->
    $routeProvider
      .when( '/', {
        redirectTo: '/tasks'
      })
      .when( '/roles', {
        controller: RolesController,
        templateUrl: '<%= asset_path "roles.html" %>'
      })
      .when( '/tasks', {
        controller: TaskListController,
        templateUrl: '<%= asset_path "task-list.html" %>'
      })
      .when( '/task/:taskId', {
        controller: TaskDetailController,
        templateUrl: '<%= asset_path 'task-detail.html' %>'
      })
      .when( '/tasks/new', {
        controller: CreateTaskController,
        templateUrl: '<%= asset_path 'new-task.html' %>'
      })

  .config(['$httpProvider', ($httpProvider) ->
    $httpProvider.defaults.headers.common['X-CSRF-Token'] =
      $('meta[name=csrf-token]').attr('content')
  ])

